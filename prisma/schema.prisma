generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model calificacion {
  codigo                String  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  codigo_docente        String  @db.Uuid
  acepta_critica        Float
  asistencia            Float
  buen_trato            Float
  claridad              Float
  clase_organizada      Float
  cumple_horarios       Float
  fomenta_participacion Float
  panorama_amplio       Float
  responde_mails        Float
  docente               docente @relation(fields: [codigo_docente], references: [codigo], onDelete: NoAction, onUpdate: NoAction)
}

model catedra {
  codigo          String            @id @db.Uuid
  codigo_materia  Int
  materia         materia           @relation(fields: [codigo_materia], references: [codigo], onDelete: NoAction, onUpdate: NoAction)
  catedra_docente catedra_docente[]
}

model catedra_docente {
  codigo_catedra String  @db.Uuid
  codigo_docente String  @db.Uuid
  catedra        catedra @relation(fields: [codigo_catedra], references: [codigo], onDelete: NoAction, onUpdate: NoAction)
  docente        docente @relation(fields: [codigo_docente], references: [codigo], onDelete: NoAction, onUpdate: NoAction)

  @@id([codigo_catedra, codigo_docente])
}

model comentario {
  codigo                                             String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  codigo_docente                                     String       @db.Uuid
  cuatrimestre                                       String
  contenido                                          String
  docente                                            docente      @relation(fields: [codigo_docente], references: [codigo], onDelete: NoAction, onUpdate: NoAction)
  cuatrimestre_comentario_cuatrimestreTocuatrimestre cuatrimestre @relation("comentario_cuatrimestreTocuatrimestre", fields: [cuatrimestre], references: [nombre], onDelete: NoAction, onUpdate: NoAction)
}

model cuatrimestre {
  nombre                                           String       @id
  comentario_comentario_cuatrimestreTocuatrimestre comentario[] @relation("comentario_cuatrimestreTocuatrimestre")
}

model docente {
  codigo                         String            @id @db.Uuid
  nombre                         String
  descripcion                    String?
  comentarios_ultima_descripcion Int               @default(0)
  calificacion                   calificacion[]
  catedra_docente                catedra_docente[]
  comentario                     comentario[]
}

model materia {
  codigo              Int       @id
  nombre              String
  codigo_equivalencia Int?
  catedra             catedra[]
  materia             materia?  @relation("materiaTomateria", fields: [codigo_equivalencia], references: [codigo], onDelete: NoAction, onUpdate: NoAction)
  other_materia       materia[] @relation("materiaTomateria")
}
