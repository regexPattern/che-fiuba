generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model calificaciones {
  codigo                String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  codigo_docente        String
  acepta_critica        Float
  asistencia            Float
  buen_trato            Float
  claridad              Float
  clase_organizada      Float
  cumple_horarios       Float
  fomenta_participacion Float
  panorama_amplio       Float
  responde_mails        Float
  docentes              docentes @relation(fields: [codigo_docente], references: [codigo], onDelete: NoAction, onUpdate: NoAction)
}

model catedra_docentes {
  codigo_catedra String
  codigo_docente String
  catedras       catedras @relation(fields: [codigo_catedra], references: [codigo], onDelete: NoAction, onUpdate: NoAction)
  docentes       docentes @relation(fields: [codigo_docente], references: [codigo], onDelete: NoAction, onUpdate: NoAction)

  @@id([codigo_catedra, codigo_docente], map: "catedra_docente_pkey")
}

model catedras {
  codigo           String             @id
  codigo_materia   Int
  catedra_docentes catedra_docentes[]
  materias         materias           @relation(fields: [codigo_materia], references: [codigo], onDelete: NoAction, onUpdate: NoAction)
}

model comentarios {
  codigo         String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  codigo_docente String
  cuatrimestre   String
  contenido      String
  docentes       docentes      @relation(fields: [codigo_docente], references: [codigo], onDelete: NoAction, onUpdate: NoAction)
  cuatrimestres  cuatrimestres @relation(fields: [cuatrimestre], references: [nombre], onDelete: NoAction, onUpdate: NoAction)
}

model cuatrimestres {
  nombre      String        @id
  comentarios comentarios[]
}

model docentes {
  codigo                         String             @id
  nombre                         String
  descripcion                    String?
  comentarios_ultima_descripcion Int                @default(0)
  calificaciones                 calificaciones[]
  catedra_docentes               catedra_docentes[]
  comentarios                    comentarios[]
}

model materias {
  codigo              Int        @id
  nombre              String
  codigo_equivalencia Int?
  catedras            catedras[]
  materias            materias?  @relation("materiasTomaterias", fields: [codigo_equivalencia], references: [codigo], onDelete: NoAction, onUpdate: NoAction)
  other_materias      materias[] @relation("materiasTomaterias")
}
